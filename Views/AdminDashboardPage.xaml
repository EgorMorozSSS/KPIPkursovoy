<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Course.Views.AdminDashboardPage"
             xmlns:viewmodel="clr-namespace:Course.ViewModels"
             x:DataType="viewmodel:AdminDashboardViewModel"
             Title="Admin Dashboard"
             BackgroundColor="{AppThemeBinding Light={StaticResource Gray100}, Dark={StaticResource OffBlack}}">

    <ScrollView>
        <VerticalStackLayout Padding="15" Spacing="15">
            <Label Text="Book Management" 
                   Style="{StaticResource Headline}" 
                   HorizontalOptions="Center"/>

            <Button Text="Add New Book"
                    Clicked="OnAddBookClicked"
                    Style="{StaticResource PrimaryButton}"
                    HorizontalOptions="Center"/>

            <CollectionView ItemsSource="{Binding Books}" 
                            SelectionMode="Single" 
                            SelectedItem="{Binding SelectedBook}"
                            EmptyView="No books available">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Border Style="{StaticResource CardStyle}" Padding="15">
                            <VerticalStackLayout Spacing="10">
                                <Label Text="Book Title:" 
                                       Style="{StaticResource FieldLabel}"/>
                                <Label Text="{Binding Title}"/>

                                <Label Text="Description:" 
                                       Style="{StaticResource FieldLabel}"/>
                                <Label Text="{Binding Description}" 
                                       MaxLines="2" 
                                       LineBreakMode="TailTruncation"/>

                                <Button Text="Delete"
                                        Command="{Binding Source={RelativeSource AncestorType={x:Type viewmodel:AdminDashboardViewModel}}, Path=DeleteBookCommand}"
                                        CommandParameter="{Binding Id}"
                                        Style="{StaticResource SecondaryButton}"/>
                            </VerticalStackLayout>
                        </Border>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>