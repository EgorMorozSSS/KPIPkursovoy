<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Course.Views.FavoritesPage"
             xmlns:viewmodel="clr-namespace:Course.ViewModels"
             xmlns:models="clr-namespace:Course.Models"
             x:DataType="viewmodel:FavoritesViewModel"
             Title="Favorite Books"
             BackgroundColor="{AppThemeBinding Light={StaticResource Gray100}, Dark={StaticResource OffBlack}}">

    <ScrollView>
        <VerticalStackLayout Padding="15" Spacing="15">
            <Label Text="Favorite Books" 
                   Style="{StaticResource Headline}" 
                   HorizontalOptions="Center"/>

            <CollectionView ItemsSource="{Binding FavoriteBooks}"
                            EmptyView="No favorite books yet">
                <CollectionView.ItemsLayout>
                    <GridItemsLayout Orientation="Vertical" 
                                     Span="2" 
                                     VerticalItemSpacing="10"
                                     HorizontalItemSpacing="10"/>
                </CollectionView.ItemsLayout>
                <CollectionView.ItemTemplate>
                    <DataTemplate x:DataType="models:Book">
                        <Border Style="{StaticResource CardStyle}">
                            <Grid RowDefinitions="Auto,Auto" 
                                  ColumnDefinitions="Auto,*"
                                  RowSpacing="5">
                                <Image Source="{Binding Image}" 
                                       Aspect="AspectFill"
                                       WidthRequest="80" 
                                       HeightRequest="120"
                                       Grid.RowSpan="2"/>

                                <Label Text="{Binding Title}" 
                                       FontAttributes="Bold"
                                       Style="{StaticResource FieldLabel}"
                                       Grid.Column="1"
                                       Grid.Row="0"/>

                                <Label Text="{Binding Genre}" 
                                       FontAttributes="Italic"
                                       Style="{StaticResource CaptionLabel}"
                                       Grid.Column="1"
                                       Grid.Row="1"/>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>